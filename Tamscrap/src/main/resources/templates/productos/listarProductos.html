<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>Listado de Productos</title>
	<link rel="stylesheet" type="text/css" th:href="@{/formulario.css}">
</head>

<body>
<header>
	<nav>
		<ul>
			<li><a th:href="@{/}">Home</a></li>
			<li><a th:href="@{/clientes}">Gestionar clientes</a></li>
			<li><a id="estas" th:href="@{/productos}">Gestionar productos</a></li>
			<li><a th:href="@{/ingredientes}">Gestionar ingredientes</a></li>
			<li><a th:href="@{/pedidos}">Gestionar pedidos</a></li>
		</ul>
	</nav>
</header>

<div class="container text-center mt-5">
	<div class="row">
		<div class="col-2"></div>

		<div class="col-8">
			<a sec:authorize="hasAuthority('ADMIN')"
			   class="btn btn-info"
			   th:href="@{/productos/new}">Create new producto</a>

			<table class="table table-striped table-responsive-md">
				<thead>
				<tr>
					<th scope="col">Image</th>
					<th scope="col">Name</th>
					<th scope="col">Price</th>
					<th scope="col">Disponibilidad</th>
					<th scope="col">Actions</th>
				</tr>
				</thead>
				<tbody>
				<tr th:each="producto : ${productos}" class="text-center">
					<td>
						<img th:src="${#strings.isEmpty(producto.imagen) ? 'https://dummyimage.com/640x360/fff/aaa' : producto.imagen}"
							 class="img-fluid align-content-center"
							 alt="Image">
					</td>
					<td th:text="${producto.nombre}"></td>
					<td th:text="${#numbers.formatCurrency(producto.precio)}"></td>
					<td>
						<span th:if="${producto.pedidos.isEmpty()}" class="text-success">Available</span>
						<span th:if="${!producto.pedidos.isEmpty()}" class="text-danger">Unavailable</span>
					</td>
					<td>
						<a class="btn btn-success"
						   sec:authorize="isAuthenticated()"
						   th:if="${producto.pedidos.isEmpty()}"
						   th:href="@{/carrito/add/{id}(id=${producto.id})}">Buy</a>
					</td>
				</tr>
				</tbody>
			</table>
		</div>

		<div class="col-2"></div>
	</div>
</div>

</body>

</html>
